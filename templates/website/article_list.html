{% extends 'base.html' %}
{% load static %}
{% block content %}


<!-- CONTENT -->
{% if  request.user.is_authenticated == True %}
    <div class="content">
        <!--Add a post button for the admin-->
        <a type="button" class="btn btn-secondary btn-lg btn-block mt-3" href="{% url 'new_page' %}">
            <i class="fas fa-plus"></i>
            Новый пост
        </a>

    </div>
{% endif %}


<!--List of posts-->
<div class="col mt-3">
    {% for article in object_list reversed %}

        <div class="row
                    no-gutters
                    border
                    rounded
                    overflow-hidden
                    flex-md-row mb-4
                    shadow-sm h-md-250
                    position-relative">
            
            <div class="col-2 p-4 flex-column position-static">
                <div class="mb-1 text-muted"> {{ article.date }} </div>
            </div>

            <div class="col p-4 d-flex flex-column position-static">
                <strong class="d-inline-block mb-2 text-primary"> {{ article.get_category }} </strong>
                <h3 class="mb-0"> {{ article.header }} </h3>
                <p class="card-text mb-auto">
                
                    {{ article.text | striptags | truncatechars:300 | safe}}

                </p>
                <a class="stretched-link" href="{{ article.get_absolute_url }}">Детальніше →</a>
            </div>
        </div>

    {% empty %}

        <div class="container mt-5">
            <div class="col-md-12 text-center">
                <span class="display-1 d-block">От діла!</span>
                <div class="mb-4 lead">В цьому роздiлi ще немає статей</div>
                <a href="/" class="btn btn-link">Повернутися на головну</a>
            </div>
        </div>

    {% endfor %}

</div>
<!--End of list of posts-->

{% endblock %}